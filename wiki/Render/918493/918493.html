<div class="wikidoc"><h1>How to derive custom style from MUI style</h1>
The following steps explain how to create a custom style that is based on the implicit MUI styles. Let&#39;s create a new implicit button style with Foreground set to Red.<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">StackPanel</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">StackPanel.Resources</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Style</span> <span style="color:Red;">TargetType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Button</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Setter</span> <span style="color:Red;">Property</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Foreground</span><span style="color:Black;">&quot;</span> <span style="color:Red;">Value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Red</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
   <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">Style</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">StackPanel.Resources</span><span style="color:Blue;">&gt;</span>

  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Button</span> <span style="color:Red;">Content</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">I&#39;m a red button</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">StackPanel</span><span style="color:Blue;">&gt;</span>
</pre></div><br /><b>Result</b><br /><img src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=mui&DownloadId=909469" alt="wpfbutton.png" title="wpfbutton.png" /><br /><br />Since the style does not explicitly derive from the implicit MUI style, the default WPF style is used as base. We need to set the Style.BasedOn to the control type:<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">StackPanel</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">StackPanel.Resources</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Style</span> <span style="color:Red;">TargetType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Button</span><span style="color:Black;">&quot;</span> <span style="color:Red;">BasedOn</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">{StaticResource {x:Type Button}}</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Setter</span> <span style="color:Red;">Property</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Foreground</span><span style="color:Black;">&quot;</span> <span style="color:Red;">Value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Red</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
   <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">Style</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">StackPanel.Resources</span><span style="color:Blue;">&gt;</span>

  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Button</span> <span style="color:Red;">Content</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">I&#39;m a red button</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">StackPanel</span><span style="color:Blue;">&gt;</span>
</pre></div><br /><b>Result</b><br /><img src="http://download-codeplex.sec.s-msft.com/Download?ProjectName=mui&DownloadId=909470" alt="muibutton.png" title="muibutton.png" /><br /><br />This looks much better, our style is now deriving from the implicit MUI style. Now when you move the custom style to App.xaml, the button again is based on the default WPF style and incorrectly rendered.<br />Not sure why this is the case, but to solve this you need to move your custom MUI styles to a separate ResourceDictionary, and reference that ResourceDictionary in your App.xaml like so:<br /><br /><b>MyStyles.xaml</b><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">ResourceDictionary</span>
    <span style="color:Red;">xmlns</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style="color:Black;">&quot;</span>
    <span style="color:Red;">xmlns:x</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">http://schemas.microsoft.com/winfx/2006/xaml</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Style</span> <span style="color:Red;">TargetType</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Button</span><span style="color:Black;">&quot;</span> <span style="color:Red;">BasedOn</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">{StaticResource {x:Type Button}}</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Setter</span> <span style="color:Red;">Property</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Foreground</span><span style="color:Black;">&quot;</span> <span style="color:Red;">Value</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Green</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
  <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">Style</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">ResourceDictionary</span><span style="color:Blue;">&gt;</span>
</pre></div><br /><b>App.xaml</b><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">ResourceDictionary</span> <span style="color:Red;">Source</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/FirstFloor.ModernUI;component/Assets/ModernUI.xaml</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">ResourceDictionary</span> <span style="color:Red;">Source</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/FirstFloor.ModernUI;component/Assets/ModernUI.Light.xaml</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">ResourceDictionary</span> <span style="color:Red;">Source</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/MyStyles.xaml</span><span style="color:Black;">&quot;</span> <span style="color:Blue;">/&gt;</span>
</pre></div><br />And then it works. So in short; deriving from implicit MUI styles? Make sure your styles are defined in local resources dictionaries, or in a separate dictionary, referenced in App.xaml.<br /><br /><br /></div><div class="ClearBoth"></div>